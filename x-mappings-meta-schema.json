{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://quadriga-dk.github.io/quadriga-schema/x-mappings-meta-schema.json",
  "title": "QUADRIGA x-mappings Meta-Schema",
  "description": "Meta-schema for validating x-mappings vocabulary crosswalk annotations in QUADRIGA JSON Schema files. The x-mappings extension documents how schema elements (properties or types) map to standard vocabularies (Dublin Core, DCAT, DCMI Terms, LRMI, Schema.org, Modalia, HERMES) using SKOS relationship types.",
  "type": "object",
  "properties": {
    "$comment": {
      "type": "string",
      "description": "Optional comment explaining mapping decisions or providing additional context about the x-mappings in this schema"
    },
    "dc": {
      "oneOf": [
        { "type": "null", "description": "No mapping exists for this vocabulary" },
        { "$ref": "#/$defs/mapping-entry" },
        {
          "type": "array",
          "items": { "$ref": "#/$defs/mapping-entry" },
          "minItems": 1,
          "description": "Array of mappings to Dublin Core properties"
        }
      ],
      "description": "Mapping to Dublin Core Elements (http://purl.org/dc/elements/1.1/)"
    },
    "dcat": {
      "oneOf": [
        { "type": "null", "description": "No mapping exists for this vocabulary" },
        { "$ref": "#/$defs/mapping-entry" },
        {
          "type": "array",
          "items": { "$ref": "#/$defs/mapping-entry" },
          "minItems": 1,
          "description": "Array of mappings to DCAT properties"
        }
      ],
      "description": "Mapping to Data Catalog Vocabulary (http://www.w3.org/ns/dcat#)"
    },
    "dcterms": {
      "oneOf": [
        { "type": "null", "description": "No mapping exists for this vocabulary" },
        { "$ref": "#/$defs/mapping-entry" },
        {
          "type": "array",
          "items": { "$ref": "#/$defs/mapping-entry" },
          "minItems": 1,
          "description": "Array of mappings to DCMI Terms properties"
        }
      ],
      "description": "Mapping to DCMI Metadata Terms (http://purl.org/dc/terms/)"
    },
    "hermes": {
      "oneOf": [
        { "type": "null", "description": "No mapping exists for this vocabulary" },
        { "$ref": "#/$defs/mapping-entry" },
        {
          "type": "array",
          "items": { "$ref": "#/$defs/mapping-entry" },
          "minItems": 1,
          "description": "Array of mappings to HERMES OER metadata properties"
        }
      ],
      "description": "Mapping to HERMES OER metadata schema (https://zenodo.org/records/17279619)"
    },
    "lrmi": {
      "oneOf": [
        { "type": "null", "description": "No mapping exists for this vocabulary" },
        { "$ref": "#/$defs/mapping-entry" },
        {
          "type": "array",
          "items": { "$ref": "#/$defs/mapping-entry" },
          "minItems": 1,
          "description": "Array of mappings to LRMI properties"
        }
      ],
      "description": "Mapping to Learning Resource Metadata Initiative terms (http://purl.org/dcx/lrmi-terms/)"
    },
    "modalia": {
      "oneOf": [
        { "type": "null", "description": "No mapping exists for this vocabulary" },
        { "$ref": "#/$defs/mapping-entry" },
        {
          "type": "array",
          "items": { "$ref": "#/$defs/mapping-entry" },
          "minItems": 1,
          "description": "Array of mappings to Modalia properties (can reference other ontologies like educor)"
        }
      ],
      "description": "Mapping to Modalia ontology (https://purl.org/ontology/modalia#) or related ontologies that Modalia reuses"
    },
    "schema": {
      "oneOf": [
        { "type": "null", "description": "No mapping exists for this vocabulary" },
        { "$ref": "#/$defs/mapping-entry" },
        {
          "type": "array",
          "items": { "$ref": "#/$defs/mapping-entry" },
          "minItems": 1,
          "description": "Array of mappings to Schema.org properties"
        }
      ],
      "description": "Mapping to Schema.org vocabulary (http://schema.org/)"
    }
  },
  "additionalProperties": false,
  "required": ["dc", "dcat", "dcterms", "hermes", "lrmi", "modalia", "schema"],
  "$defs": {
    "relation": {
      "type": "string",
      "enum": [
        "skos:exactMatch",
        "skos:closeMatch",
        "skos:broadMatch",
        "skos:narrowMatch",
        "skos:relatedMatch"
      ],
      "description": "SKOS mapping relation type indicating the semantic relationship between the schema element and the target vocabulary term. See https://www.w3.org/TR/skos-reference/#mapping"
    },
    "mapping-entry": {
      "type": "object",
      "description": "A mapping to a vocabulary term. The target can be either a prefixed term (e.g., 'schema:name') or a full URI (e.g., 'https://github.com/tibonto/educor#EducationalResource'). This allows ontologies to reuse definitions from other schemas.",
      "properties": {
        "relation": { "$ref": "#/$defs/relation" },
        "target": {
          "type": "string",
          "pattern": "^((dc|dcat|dcterms|lrmi|modalia|schema|skos):[a-zA-Z]+|https?://.+)$",
          "description": "The target vocabulary term, either in namespace:term format using a namespace from @context (dc, dcat, dcterms, lrmi, modalia, schema, skos) or as a full URI (e.g., 'https://github.com/tibonto/educor#EducationalResource')"
        }
      },
      "required": ["relation", "target"],
      "additionalProperties": false
    }
  }
}
